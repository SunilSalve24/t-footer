<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-footer-panel/paper-header-panel.html">
<link rel="import" href="../paper-toolbar/paper-toolbar.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-tabs/paper-tabs.html">
<link rel="import" href="../iron-icon/iron-icon.html">
<link rel="import" href="../iron-media-query/iron-media-query.html">
<link rel="import" href="../paper-tabs/paper-tab.html">
<link rel="import" href="../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../paper-listbox/paper-listbox.html">
<link rel="import" href="../iron-pages/iron-pages.html">
<link rel="import" href="../paper-menu/paper-menu.html">
<link rel="import" href="../paper-item/paper-icon-item.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../iron-icons/maps-icons.html">
<link rel="import" href="../iron-icons/communication-icons.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="./t-footer-style.html">

<!--
  `t-footer`
  Footer component

  @demo demo/index.html 
-->

<dom-module id="t-footer">
  <template>
    <style is="custom-style" include="t-footer-style iron-flex iron-flex-alignment"></style>
    <iron-media-query query="(max-width: 1024px) and (min-width: 700px)" query-matches="{{isTablet}}"></iron-media-query>
    <iron-media-query query="(min-width : 320px) and (max-width : 480px)" query-matches="{{isMobile}}"></iron-media-query>
    <div class="layout footer">
      <paper-tabs hidden$="[[_hideIfNoSections(sections)]]" scrollable noink no-bar selected-class="selected-tab" class=" flex tabs" selected="{{selected}}">
        <template is="dom-repeat" items="[[sections]]">
          <paper-tab>[[item.heading]]</paper-tab>
        </template>
      </paper-tabs>

      <iron-pages hidden$="[[_hideIfNoSections(sections)]]" class="pages flex vertical layout " selected="{{selected}}">
        <template is="dom-repeat" items="[[sections]]">
          <div>
            <ul class="items">
              <template is="dom-repeat" items="[[item.items]]" as="frequent">
                <li><a href$="[[frequent.url]]">[[frequent.text]]</a></li>
              </template>
            </ul>
          </div>
        </template>
      </iron-pages>
      <div class$="[[centerAlignIfResponsive(notDesktop)]] layout contact-section section">
        <div class$="{{centerAlignIfResponsive(notDesktop)}} flex layout contact-us" >
          <div class="contact-label">[[contactSection.contactUs.heading]]</div>
          <div class$="{{centerAlignIfResponsive(notDesktop)}} layout details" >
            <div>[[contactSection.contactUs.phone.label]]: [[contactSection.contactUs.phone.value]]</div>
            <div>[[contactSection.contactUs.fax.label]]: [[contactSection.contactUs.fax.value]]</div>
            <div>[[contactSection.contactUs.email.label]]: <a href$="mailto:@[[contactSection.contactUs.email.value]]">[[contactSection.contactUs.email.value]]</a></div>
          </div>
        </div>
        <div hidden$="[[_hideIfContentOverflowHappens(contactSection.followUs.platforms, isMobile)]]" class$="[[handleFollowAlignment(isMobile) ]] wrap layout follow-us"  >
          <div class="contact-label">[[contactSection.followUs.heading]]</div>
          <div id="social" class="social-links">
            <template is="dom-repeat" items="[[contactSection.followUs.platforms]]">
              <a href$="[[item.url]]"><iron-icon src="[[item.icon]]"></iron-icon></a>
            </template>
          </div>
        </div>
      </div>
      <div class$="{{centerAlignIfResponsive(notDesktop)}} contact-section layout follow-us" hidden$="[[!_hideIfContentOverflowHappens(contactSection.followUs.platforms, isMobile)]]" >
        <div class="contact-label">[[contactSection.followUs.heading]]</div>
        <div class="social-links">
            <template is="dom-repeat" items="[[contactSection.followUs.platforms]]">
              <a href$="[[item.url]]"><iron-icon src="[[item.icon]]"></iron-icon></a>
            </template>
        </div>
      </div>
      <div hidden$="[[_hideIfNoChildren]]" class="layout horizontal copyright-section section">
        <content></content>
      </div>
      <div class="layout horizontal copyright-section section">
        <div class$="{{centerAlignIfResponsive(notDesktop)}} flex layout links" >
          <ul class="flex link-list">
            <template is="dom-repeat" items="[[footerLinks]]">
              <li><a href$="[[item.url]]">[[item.label]]</a></li>
            </template>
          </ul>
        </div>

        <div hidden$="[[notDesktop]]"  class="copyright end-justified">
          &copy; [[copyright]]
        </div>
      </div>
      <div hidden$="[[!notDesktop]]"  class="copyright-section section horizontal layout center-justified">
          &copy; [[copyright]]
      </div>
  </template>
    </div>
    </template>

    <script>
Polymer({
  is: 't-footer',

  observers:[
    '_arrangeSocialLinks(contactSection.followUs.platforms.splices, isMobile)'
  ],

  properties: {
isMobile:{
      type: Boolean
    },
isTablet:{
      type: Boolean
    },
    sections:{
      type: Array
    },
    contactSection:{
      type: Object,
      notify: true
    },
    copyright: {
      type: String
    },
    footerLinks:{
      type: Array
    },
    _arrangeSocialLinks: {
        type: String,
        computed: '_hideIfContentOverflowHappens(contactSection.followUs.platforms.splices,isMobile)'
    },
    selected:{
      type: Number,
      value: 0
    },
    notDesktop: {
      type: Boolean,
      // when `first` or `last` changes `computeFullName` is called once
      // and the value it returns is stored as `fullName`
      computed: 'isSmallScreen(isTablet, isMobile)'
    },
    _hideIfNoChildren:{
      type: Boolean,
      value: true
    }
  },

  ready: function(){
    this._hideIfNoChildren = Polymer.dom(this).children.length === 0;
  },

  isSmallScreen: function(isTablet, isMobile){
    return isTablet || isMobile;
  },

  centerAlignIfResponsive: function(notDesktop){
    if(this.isMobile)
      return "vertical ";
    if(this._hideIfContentOverflowHappens(this.contactSection.followUs.platforms)){
      return "horizontal center-justified";
    }
    return "horizontal";
  },

  handleFollowAlignment: function(isMobile){
    return isMobile? "center-justified vertical": "end-justified horizontal";
  },

  _hideIfNoSections: function(sections){
    return (!sections || sections.length === 0);
  },

  _hideIfContentOverflowHappens: function(platforms,isMobile){
    return ((platforms && platforms.length> 5) || this.isTablet || this.isMobile);
  }
});
    </script>
</dom-module>

